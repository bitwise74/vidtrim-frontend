import"./CWj6FrbW.js";import{d as G,o as J,s as N}from"./CkHgP2aA.js";import{z as V,b as c,a as s,C as z,G as M,F as K,d as h,A as C,r as m,f as u,B as Q,c as _,m as P,n as W}from"./Btcb0jqc.js";import{p as I,i as g}from"./AYVHNyoE.js";import{g as X}from"./CMM5F5IC.js";const L="http://localhost:8080";async function fe(n){const e=await fetch(`${L}/api/users/login`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"},credentials:"include"});if(e.status===200)return;const a=await e.json();switch(console.error(`[${a.requestID}] Login request failed: ${a.error}`),e.status){case 400:throw new Error("Form is invalid");case 401:throw new Error("Email or password invalid");case 404:throw new Error("User with this e-mail address doesn't exist. Please register first");default:throw new Error("Something went wrong, please check the console for more information")}}async function he(n){const e=await fetch(`${L}/api/users`,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});if(e.status===200)return;const a=await e.json();switch(console.error(`[${a.requestID}] Login request failed: ${a.error}`),e.status){case 400:throw new Error(a.error);case 401:throw new Error("Email or password invalid");case 409:throw new Error("User with this e-mail address already exists. Please log in");default:throw new Error("Something went wrong, please check the console for more information")}}async function Y(){return(await fetch(`${L}/api/validate`,{method:"HEAD",credentials:"include"})).status===200}const Z=n=>{let e=n+"=",b=decodeURIComponent(document.cookie).split(";");for(let l=0;l<b.length;l++){let r=b[l];for(;r.charAt(0)==" ";)r=r.substring(1);if(r.indexOf(e)==0)return r.substring(e.length,r.length)}return""},$=async(n,e)=>{X(P(e)?"/dashboard":"/login")};var ee=c('<div class="vr me-3"></div> <h1 class="fs-5 fw-semibold mb-0"> </h1>',1),ae=c('<div class="d-flex align-items-center gap-2"><a href="/dashboard" class="btn btn-dark btn-sm"><i class="bi bi-view-stacked me-1"></i> Dashboard</a></div>'),te=c('<div class="d-flex align-items-center gap-2"><button class="btn btn-outline-dark btn-sm">Log In</button> <a href="/register" class="btn btn-dark btn-sm">Sign Up</a></div>'),se=c('<div class="d-flex align-items-center gap-2"><a href="/" class="btn btn-dark btn-sm"><i class="bi bi-arrow-left me-1"></i> Go back</a></div>'),re=c('<div class="d-flex align-items-center gap-2"><a href="/editor" class="btn btn-dark btn-sm"><i class="bi bi-pencil me-1"></i> Editor</a></div>'),ie=c('<div class="d-flex align-items-center gap-2"><a href="/dashboard" class="btn btn-dark btn-sm"><i class="bi bi-view-stacked me-1"></i> Dashboard</a></div>'),oe=c('<header class="border-bottom bg-white-95 sticky-top-custom"><div class="container"><div class="d-flex align-items-center justify-content-between py-3"><div class="d-flex align-items-center"><a href="/" class="d-flex align-items-center text-decoration-none me-3"><div class="d-flex align-items-center justify-content-center rounded-2 bg-dark me-2" style="width: 32px; height: 32px;"><i class="bi bi-play-fill text-white"></i></div> <span class="fs-4 fw-bold text-dark">vid.sh</span></a> <!></div> <!></div></div></header>');function me(n,e){V(e,!0);let a=I(e,"page",3,""),b=I(e,"title",3,""),l=K(!1);J(async()=>{Z("logged_in")==="1"&&M(l,await Y(),!0)});var r=oe(),S=h(r),j=h(S),k=h(j),U=C(h(k),2);{var D=i=>{var d=ee(),v=C(u(d),2),p=h(v,!0);m(v),Q(()=>N(p,b())),s(i,d)};g(U,i=>{b()&&i(D)})}m(k);var O=C(k,2);{var T=i=>{var d=_(),v=u(d);{var p=t=>{var o=ae();s(t,o)},x=t=>{var o=te(),y=h(o);y.__click=[$,l],W(2),m(o),s(t,o)};g(v,t=>{P(l)?t(p):t(x,!1)})}s(i,d)},q=i=>{var d=_(),v=u(d);{var p=t=>{var o=se();s(t,o)},x=t=>{var o=_(),y=u(o);{var A=f=>{var w=re();s(f,w)},R=f=>{var w=_(),B=u(w);{var H=E=>{var F=ie();s(E,F)};g(B,E=>{a()==="editor"&&E(H)},!0)}s(f,w)};g(y,f=>{a()==="dashboard"?f(A):f(R,!1)},!0)}s(t,o)};g(v,t=>{a()==="register"||a()==="login"?t(p):t(x,!1)},!0)}s(i,d)};g(O,i=>{a()==="main"?i(T):i(q,!1)})}m(j),m(S),m(r),s(n,r),z()}G(["click"]);export{me as H,fe as L,L as P,he as R,Y as V,Z as g};
